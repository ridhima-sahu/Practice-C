#include <stdio.h>
#include <string.h>
#include <stdlib.h>

void print_usage(const char *program_name) {
    printf("Usage: %s [--metric | --imperial]\n", program_name);
    printf("  --metric     Use metric units (kg, meters) [default]\n");
    printf("  --imperial   Use imperial units (lbs, inches)\n");
    printf("  --help       Show this help message\n");
}

int main(int argc, char *argv[]) {
    int use_metric = 1; // default
    float weight, height, bmi;

    // Handle command-line arguments
    if (argc > 1) {
        if (strcmp(argv[1], "--imperial") == 0) {
            use_metric = 0;
        } else if (strcmp(argv[1], "--metric") == 0) {
            use_metric = 1;
        } else if (strcmp(argv[1], "--help") == 0) {
            print_usage(argv[0]);
            return 0;
        } else {
            printf("Unknown option: %s\n", argv[1]);
            print_usage(argv[0]);
            return 1;
        }
    }

    // Prompt user based on selected unit system
    if (use_metric) {
        printf("Enter your weight in kilograms: ");
        scanf("%f", &weight);

        printf("Enter your height in meters: ");
        scanf("%f", &height);

        if (weight <= 0 || height <= 0) {
            printf("Invalid input. Weight and height must be positive.\n");
            return 1;
        }

        bmi = weight / (height * height);
    } else {
        printf("Enter your weight in pounds: ");
        scanf("%f", &weight);

        printf("Enter your height in inches: ");
        scanf("%f", &height);

        if (weight <= 0 || height <= 0) {
            printf("Invalid input. Weight and height must be positive.\n");
            return 1;
        }

        // Convert to BMI using imperial formula
        bmi = (weight / (height * height)) * 703;
    }

    // Output BMI and category
    printf("Your BMI is: %.2f\n", bmi);

    if (bmi < 18.5)
        printf("Category: Underweight\n");
    else if (bmi < 24.9)
        printf("Category: Normal weight\n");
    else if (bmi < 29.9)
        printf("Category: Overweight\n");
    else
        printf("Category: Obesity\n");

    return 0;
}
